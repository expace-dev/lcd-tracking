{% extends 'base.html.twig' %}

{% block title %}Fiche intervention{% endblock %}

{% block body %}
<section class="section">
  <div class="container">

    <header class="section-header">
      <h2>{{ property.name }}</h2>
      <p class="subtle">Fiche du {{ intervention.businessDate|date('d/m/Y') }}</p>
    </header>

    {% for message in app.flashes('success') %}
      <p class="form-success" role="status">{{ message }}</p>
    {% endfor %}

    <div class="form-card card">
      {{ form_start(form, { attr: {
        onsubmit: "return confirm('Ta fiche est-elle valide ? Es-tu sûr de vouloir confirmer ?');"
      } }) }}

        <h3>Sortie voyageurs</h3>

        <div class="form-row">
          {{ form_label(form.exitOnTime) }}
          {{ form_widget(form.exitOnTime) }}
          {{ form_errors(form.exitOnTime) }}
        </div>

        <div class="form-row">
          {{ form_label(form.instructionsRespected) }}
          {{ form_widget(form.instructionsRespected) }}
          {{ form_errors(form.instructionsRespected) }}
        </div>

        <div class="form-row">
          {{ form_label(form.exitComment) }}
          {{ form_widget(form.exitComment) }}
          {{ form_errors(form.exitComment) }}
        </div>

        <hr style="border:0;border-top:1px solid var(--border); margin: 16px 0;">

        <h3>Ménage</h3>

        <div class="form-row">
          {{ form_widget(form.checkBedMade) }}
          {{ form_label(form.checkBedMade) }}
        </div>

        <div class="form-row">
          {{ form_widget(form.checkFloorClean) }}
          {{ form_label(form.checkFloorClean) }}
        </div>

        <div class="form-row">
          {{ form_widget(form.checkBathroomOk) }}
          {{ form_label(form.checkBathroomOk) }}
        </div>

        <div class="form-row">
          {{ form_widget(form.checkKitchenOk) }}
          {{ form_label(form.checkKitchenOk) }}
        </div>

        <div class="form-row">
          {{ form_widget(form.checkLinenChanged) }}
          {{ form_label(form.checkLinenChanged) }}
        </div>

        <div class="form-row">
          {{ form_label(form.cleaningComment) }}
          {{ form_widget(form.cleaningComment) }}
          {{ form_errors(form.cleaningComment) }}
        </div>

        <p class="form-hint">
          Statut : {% if intervention.isConform %}<span class="badge badge--success">Conforme</span>{% else %}<span class="badge badge--warning">Non conforme</span>{% endif %}
        </p>

        <div class="cta-row" style="margin-top: 12px;">
          <button class="btn btn-primary" type="submit">Confirmer</button>
          <a class="btn btn-secondary" href="{{ path('worker_access', { token: worker.accessToken }) }}">Retour</a>
        </div>

      {{ form_end(form) }}
    </div>

  </div>
</section>
{% endblock %}
